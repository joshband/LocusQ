Title: APC Workflow: Ship
Document Type: Workflow
Author: APC Codex
Created Date: 2026-02-18
Last Modified Date: 2026-02-18

---
description: "PHASE 5: Packaging - Create cross-platform installers and distribution packages"
---

Title: Ship Phase
Document Type: Workflow
Author: APC Codex
Created Date: 2026-02-18
Last Modified Date: 2026-02-18


# Ship Phase

**Goal:** Create professional, cross-platform plugin installers with license agreements
**Trigger:** `/ship [Name]` or "Ship [Name]"
**Prerequisites:** Phase 4 (CODE) complete, audio engine working, all tests passed
**Skill Reference:** `.codex/skills/ship/SKILL.md`

---

## Prerequisites

```powershell
. "$PSScriptRoot\..\scripts\state-management.ps1"

$state = Get-PluginState -PluginPath "plugins\$PluginName"

if ($state.current_phase -ne "code_complete") {
    Write-Error "Implementation not complete. Run /impl first."
    exit 1
}
```

---

## Overview

The Ship phase creates distribution-ready plugin packages for Windows, macOS, and Linux. It supports:

- **Local builds** - Use existing build on current platform
- **GitHub Actions builds** - Cross-platform CI/CD for platforms you can't build locally
- **Hybrid approach** - Combine local and remote builds

### Supported Platforms & Formats

| Platform | VST3 | AU | Standalone | LV2 | Build Method |
|----------|------|-----|------------|-----|--------------|
| Windows  | âœ“    | -   | âœ“          | -   | Local or GitHub |
| macOS    | âœ“    | âœ“   | âœ“          | -   | GitHub only |
| Linux    | âœ“    | -   | âœ“          | âœ“   | GitHub only |

---

## Workflow Steps

### STEP 1: Detect Environment

**Execute:** Detect current platform and check for existing local build

**Logic:**
- Identify current OS (Windows/macOS/Linux)
- Check `build/` directory for existing artifacts
- Determine which platforms can use local build vs need GitHub Actions

**Reference:** See `ship/SKILL.md` - "STEP 1: DETECT CURRENT PLATFORM & BUILD STATUS"

---

### STEP 2: Prompt User for Platform Selection

**Execute:** Display platform selection menu and capture user input

**CRITICAL:** Always ask user which platforms to include in the release

**Options to Present:**
```
Current Platform: [Windows|macOS|Linux]
Local Build Status: [Found|Not Found]

Select platforms to include:
[1] Current Platform - USE LOCAL BUILD
[2] Current Platform - BUILD WITH GITHUB ACTIONS
[3] Windows (VST3, Standalone) - GITHUB ACTIONS
[4] macOS (VST3, AU, Standalone) - GITHUB ACTIONS
[5] Linux (VST3, LV2, Standalone) - GITHUB ACTIONS
[6] ALL PLATFORMS - Use local for current, GitHub for others

Enter numbers (comma-separated) or 'all':
```

**Rationale:** User may already have a local build and want to save GitHub Actions minutes/credits by only building missing platforms.

**Reference:** See `ship/SKILL.md` - "STEP 2: ASK USER FOR PLATFORM SELECTION"

---

### STEP 3: Process Local Build (If Selected)

**Execute:** Create installer from local build artifacts

**Applies to:** Current platform only, when user selects local build option

**Actions:**
1. Validate local build artifacts exist
2. Create platform-native installer
3. Generate license file

**Windows Only:**
- Check for Inno Setup
- Generate `.iss` script from template
- Compile installer executable
- Include license agreement page
- Support custom installation path

**Reference:** See `ship/SKILL.md` - "STEP 3: LOCAL BUILD PROCESS"

---

### STEP 4: Trigger GitHub Actions (If Selected)

**Execute:** Trigger cross-platform builds via GitHub Actions

**Applies to:** Platforms selected that differ from current platform, or when user explicitly chooses GitHub Actions

**Actions:**
1. Verify GitHub Actions workflow exists (`.github/workflows/build-release.yml`)
2. Check git status (commit if needed)
3. Create and push tag to trigger workflow
4. Provide user with GitHub Actions URL to monitor progress

**Tag Format:** `v{version}-{PluginName}`

**Reference:** See `ship/SKILL.md` - "STEP 4: GITHUB ACTIONS BUILD PROCESS"

---

### STEP 5: Download & Process Artifacts

**Execute:** Download build artifacts and create installers

**When:** After GitHub Actions completes

**Actions:**
1. Download artifacts using `gh` CLI
2. For macOS: Prepare PKG/DMG creation scripts (run on Mac to finalize)
3. For Linux: Prepare AppImage/DEB creation scripts (run on Linux to finalize)
4. Create platform-specific installers

**Note:** macOS and Linux installers require their respective platforms for final signing/packaging. Windows can prepare the structure.

**Reference:** See `ship/SKILL.md` - "STEP 5: CREATE INSTALLERS FOR GITHUB BUILDS"

---

### STEP 6: Create License File

**Execute:** Generate EULA text file for inclusion in all installers

**Location:** `dist/{PluginName}-v{version}/LICENSE.txt`

**Reference:** See `ship/SKILL.md` - "STEP 6: CREATE LICENSE FILE"

---

### STEP 7: Finalize Distribution

**Execute:** Assemble final distribution package

**Actions:**
1. Create unified distribution directory
2. Copy all platform installers
3. Add documentation (README, CHANGELOG, INSTALL guide)
4. Create final ZIP archive
5. Update plugin state to `ship_complete`

**Output Structure:**
```
dist/{PluginName}-v{version}/
â”œâ”€â”€ {PluginName}-{version}-Windows-Setup.exe
â”œâ”€â”€ {PluginName}-{version}-macOS.dmg
â”œâ”€â”€ {PluginName}-{version}-macOS.pkg
â”œâ”€â”€ {PluginName}-{version}-Linux.AppImage
â”œâ”€â”€ {PluginName}-{version}.deb
â”œâ”€â”€ README.md
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ LICENSE.txt
â””â”€â”€ INSTALL.md
```

**Reference:** See `ship/SKILL.md` - "STEP 7: FINALIZE DISTRIBUTION"

---

## Validation

- Verify all formats built (VST3/AU/LV2/Standalone)
- Verify tests passed
- Verify installer created in dist/
- Verify GitHub commit successful

## Claude Parity Defaults (Mandatory Unless User Overrides)

1. For macOS releases, default build target is universal (`arm64;x86_64`) unless the user explicitly requests single-arch output.
2. Validate plugin-format artifacts explicitly for the selected platform set (at minimum VST3 and Standalone; include AU on macOS).
3. Record architecture and format evidence in `dist/{PluginName}-v{version}/BUILD_MANIFEST.md`.
4. If any requested platform/format artifact is missing, stop ship phase and return a concrete remediation list.
5. Do not set `ship_complete` until manifest and distribution archive both exist.

---

## State Management

**Update `status.json`:**
```json
{
  "current_phase": "ship_complete",
  "version": "v1.0.0",
  "validation": {
    "ship_ready": true
  },
  "distribution": {
    "platforms": ["Windows", "macOS", "Linux"],
    "local_build": ["Windows"],
    "github_build": ["macOS", "Linux"]
  }
}
```

---

## Completion

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ‰ PLUGIN SHIPPED SUCCESSFULLY!                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Plugin: {PluginName} v{version}                              â•‘
â•‘                                                              â•‘
â•‘  Platforms Built:                                            â•‘
â•‘    â€¢ Windows: {Local/GitHub}                                  â•‘
â•‘    â€¢ macOS: GitHub Actions                                    â•‘
â•‘    â€¢ Linux: GitHub Actions                                    â•‘
â•‘                                                              â•‘
â•‘  Distribution: dist/{PluginName}-v{version}.zip               â•‘
â•‘                                                              â•‘
â•‘  Installers:                                                 â•‘
â•‘    â€¢ Windows: Setup.exe with license & custom path           â•‘
â•‘    â€¢ macOS: DMG + PKG with component selection               â•‘
â•‘    â€¢ Linux: AppImage + DEB packages                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Next Steps

- Test installers on target platforms
- Upload to GitHub Releases (if not auto-released)
- Distribute to users
- Begin next plugin project

---

## Reference

For detailed implementation, code samples, and troubleshooting:
**â†’ See `.codex/skills/ship/SKILL.md`**
